<!doctype html>
<html>

<head>
	<title>Time Scale Point Data</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='js/utils.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='js/apputils.js') }}"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
	 crossorigin="anonymous">
	<style>
		canvas {
			-moz-user-select: none;
			-webkit-user-select: none;
			-ms-user-select: none;
		}
	</style>
</head>

<body>
	<div class="container">
		<div class="jumbotron" style="background: rgb(75, 192, 192);">
			<h1>Mood SMS</h1>
			<p>Text your mood.</p>
		</div>

		<div class="row">

			<div class="col-lg-3">
				{% for mood in moods['moods']%}
				<div class="row">
					<div class="col-lg-12">
						{% if mood['type'] == 'Anxiety' %}
						<p> <span style="color: rgb(255, 99, 132);">{{ mood['type']}}</span> at {{mood['time']}}</p>
						{% elif mood['type'] == 'Happiness' %}
						<p> <span style="color: rgb(75, 192, 192);">{{ mood['type']}}</span> at {{mood['time']}}</p>
						{% elif mood['type'] == 'Motivation' %}
						<p> <span style="color: rgb(54, 162, 235);">{{ mood['type']}}</span> at {{mood['time']}}</p>
						{% endif%}
						{% for star in range(mood['star']) %}
						<i class="fas fa-star"></i>
						{% endfor%}

						{% for empty_star in range(5 - mood['star'])%}
						<i class="far fa-star"></i>
						{% endfor%}
						<hr />
					</div>
				</div>
				{% endfor%}
			</div>
			<div class="col-lg-1"></div>
			<div class="col-lg-8">
				{% for diary in diaries['diaries'] %}
				<div class="row">
					<div class="col-lg-12">
						<h5>{{ diary['time'] }}</h5>
						<p>{{ diary['post'] }}</p>
					</div>
				</div>
				{% endfor %}
			</div>
		</div>
		<canvas id="canvas"></canvas>

	</div>
	<script>

		let dataset_generator = function () {
			let dt = new Date('2018-10-08T00:00:00Z');
			dt.setHours(dt.getHours() - 9);
			var dataset = [];
			for (i = 0; i < 12; i += 2) {
				let ran_rating = Math.floor(Math.random() * 5) + 1;
				dataset.push({ x: new Date(dt), y: ran_rating });
				dt.setHours(dt.getHours() + 2);
			}
			return dataset;
		}

		var color = Chart.helpers.color;
		let data_set = [
			{
				label: 'Anxiety',
				backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
				borderColor: window.chartColors.red,
				fill: false,
				data: dataset_generator()
			},
			{
				label: 'Happiness',
				backgroundColor: color(window.chartColors.green).alpha(0.5).rgbString(),
				borderColor: window.chartColors.green,
				fill: false,
				data: dataset_generator()
			},
			{
				label: 'Motivation',
				backgroundColor: color(window.chartColors.blue).alpha(0.5).rgbString(),
				borderColor: window.chartColors.blue,
				fill: false,
				data: dataset_generator()
			}
		]

		load_chart(data_set);
	</script>

	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>
</body>

</html>